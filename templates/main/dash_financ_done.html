{% load static %}

<!DOCTYPE html>
<html lang="en">
   <head>
      <meta charset="UTF-8">
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <title>The Next Leavel AI</title>
      <link
         href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css"
         rel="stylesheet"
         integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65"
         crossorigin="anonymous">
      <link rel="stylesheet"
         href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
         <link rel="stylesheet" href="{% static 'assets/styles/Style.css' %}">

   </head>
   <body class="dashoboard-main">
     

      <header class="shadow-sm">
         <nav class="navbar navbar-expand-md bg-transparent header-content">
            <div class="container">
               <a class="nav-link navbar-brand  logo"
               href="{% url 'Home' %}">
                  <img
                     class="w-100 h-100"
                     src="{% static 'assets/images/transparent-logo.png' %}"
                     alt>
               </a>
               <div
                  class="button py-1 d-flex  bg-warning bg-opacity-10 gap-3 rounded-5 border px-2 border-2 border-danger ">
                  <p class="p-0 ps-1 m-0 py-1">
                     5 AI Calls Left Today.
                  </p>
                  <div
                     class="bg-primary bg-opacity-10 gradient-button text-dark px-3 py-1 rounded-5">
                     upgrade to Pro
                  </div>
               </div>
               <div class="d-flex gap-3">
                  <!-- add classes 22/7 -->
                  <div class="d-flex gap-3">
                     <!-- Add Icon 22/7 -->
                     <div
                        class="social-icon  gradient-button p-1 rounded-2 border-0">
                        <a href="../Settings/Settings.html">
                           <img class="w-100 p-1 h-100"
                              src="{% static 'assets/images/setting.png' %}"   alt>
                        </a>
                     </div>
                     <a class="nav-link"
                        href="{% url 'logout' %}">
                        <button
                           class="btn gradient-button active">Logout</button>
                     </a>
                  </div>
               </div>

            </div>
         </nav>
      </header>




      <main class="p-0 m-0 d-flex ">
         <div class=" py-3 shadow  mt-auo side-bar">
            <div class="d-flex flex-column h-100 justify-content-center">
               <a href="{% url 'dashboard' %}"
                  class="cursor-pointer nav-link ">
                  <p id="IdButtonEmail"
                     class="p-0 m-0 px-3 py-2 fw-semibold border-bottom gradient-button btn-active border-0">
                     Email
                  </p>
               </a>
               
             <!--<a href="./10KReport.html"
                  class="cursor-pointer nav-link "> -->  
                  <!-- Class Name change -->
                  <button id="IdButtonFInancialInsight"
                     class="IdButtonFInancialInsights p-0 m-0 ps-3 py-2 border-bottom   fw-semibold gradient-button border-0" >
                     Financial Insights
                  </button>
                  
              <!--  </a> -->
               <a href=" #"
                  class="cursor-pointer nav-link ">
                  <p
                     class="p-0 m-0 px-3 py-2 border-bottom   fw-semibold gradient-button border-0">
                     Grant
                  </p>
               </a>
            </div>
         </div>



         
         <div class="row justify-content-between py-4 dashbpard-content"  id="IdEmail">
            <div class="d-flex gap-2 h-100">
             

               <div class="col-4 w-33 shadow h-100 rounded">
                  <div
                     class="col-12 w-100 position-relative h-100 d-flex flex-column p-3">
                     <div class="d-flex gap-2  align-items-center pb-2">
                        <div
                           class="user-avatar overflow-hidden border border-2 border-danger rounded-circle">
                           <img class="h-100 w-100"
                              src="{% static 'assets/images/imagePreviewEmail.png' %}"
                              alt="User Avatar">
                        </div>
                        <p class="p-0 fw-bold m-0">{{user.first_name}} </p>
                     </div>
                     <div class="form-group  pb-1 col-12">
                        <label for="pcompany">Prospect Company</label>
                        <input type="text" class="form-control py-1"
                           id="pcompany"
                           placeholder="Linkedin URL">
                     </div>
                     <div
                        class="shadow-sm position-relative msg-area rounded bg-white border-dark  py-3">
                        <div class="col-12 pb-2" id="outputId1">
                           <textarea
                              class="form-control no-border  rounded-2"
                              id="overview"
                              rows="15"
                              oninput="autoResize(this)"
                              placeholder="View and edit project company details"></textarea>
                        </div>
                        <input type="hidden" name="Prospect_Company_name" id="id_Prospect_Company_name" >
                        <input type="hidden" name="Prospect_Company_Overview" id="id_Prospect_Company_Overview">
                        <input type="hidden" name="Prospect_Company_Industry" id="id_Prospect_Company_Industry">
                        <input type="hidden" name="Prospect_Company_Headquarters" id="id_Prospect_Company_Headquarters">
                        <input type="hidden" name="Prospect_Company_Size" id="id_Prospect_Company_Size">
                        <input type="hidden" name="Prospect_Company_founded" id="id_Prospect_Company_founded">
                        <input type="hidden" name="Prospect_Company_specialties" id="id_Prospect_Company_specialties">



                           
                        <div class="col-12 pb-2 px-3" id="outputId2" style="display:none">
                           <div class=" d-flex align-items-center gap-3">
                              <div class="user-avatar pb-3 overflow-hidden border border-2 border-danger rounded-circle">
                                 <img id="CompanyImage" class="h-100 w-100" src=""
                                    alt="User Avatar">
                              </div>
                              <h5 id="headingcompany" class="clickable  pb-0 mb-0"></h5>
                           </div>
                           <small id="paragraph" class="clickable mb-3 px-3"> </small>
                           {% comment %} <h6 id="heading"
                              class="clickable px-3 mt-3 pb-0 mb-0">Website</h6>
                           <a href="#">
                              <small id="paragraph1" class="clickable px-3">http:/link</small>
                           </a> {% endcomment %}
                           <h6 id="heading"
                              class="clickable px-3 mt-3 pb-0 mb-0">Industry</h6>
                           <small id="paragraph2" class="clickable mb-3 px-3">
                              
                           </small>
                           <small id="paragraphSpecialitites" class="clickable mb-3 px-3">
                              
                           </small>
                           <br>
                           <h6 id="heading"
                              class="clickable px-3 mt-3 pb-0 mb-0">Company
                              Size</h6>
                           <small id="paragraph3" class="clickable mb-3 px-3"></small>

                           <br> <small id="paragraph4"
                              class="clickable mb-3 px-3">Company
                              Number of employees</small>

                           <h6 id="heading"
                              class="clickable px-3 mt-3 pb-0 mb-0">Headquarters</h6>
                           <small id="paragraph5" class="clickable mb-3 px-3"></small>

                           <h6 id="heading"
                              class="clickable px-3 mt-3 pb-0 mb-0">Founded</h6>
                           <small id="paragraph6" class="clickable mb-3 px-3"></small>

                        </div>




                        <div id="showContent"
                           class="position-absolute top-0 end-0 start-0 mt-3"
                           style="display: none;">
                           <img class="w-100 h-100"
                              src="{% static 'assets/images/dotline-unscreen.gif' %}"
                              class="img-fluid" alt="Your GIF">
                        </div>
                     </div>
                     <div class="d-flex mt-auto justify-content-end gap-2 pt-3">
                        <button id="processBtn"
                           class="btn-sm btn gradient-button"> Process</button>
                        <button id="submitBtnId" class="btn-sm btn gradient-button" disabled>Submit</button>
                     </div>
                  </div>
               </div>
               <div class="col-4 w-33 h-100 shadow rounded">
                  <div
                     class="col-12 overflow-auto h-100 mx-auto focus-area shadow rounded p-3 ">
                     <div
                        class="form-group position-relative pb-2 pb-lg-4 col-12">
                        <label for="focus-area" class="fw-bold">Focus Areas</label>
                        <textarea class="form-control" id="focus-area" rows="6"
                           placeholder="Input key focus areas for the email e.g “show how we can improve the prospect company's customer experience and technology aspects”"></textarea>
                        <div
                           class="position-absolute d-flex justify-content-center top-0 mt-5 pt-4">
                           <img id="showgif" style="display: none;"
                              class="w-75 h-75"
                              src="{% static 'assets/images/dotline-unscreen.gif' %}"
                              class="img-fluid" alt="Your GIF">
                        </div>
                     </div>
                     <div class="pb-3">
                        <p class="m-0 pb-2 fw-bold">Intent</p>
                        <div class="d-flex flex-wrap gap-2">
                           <button id="btn3"
                              type="button"
                              class="intentClass bg-warning bg-opacity-10 btn gradient-button intent btn-active text-dark btn-sm rounded-2 py-1 px-3"
                              onclick="selectedButton(this)">Professional</button>
                           <button type="button"
                              id="btn1"
                              class="intentClass bg-warning bg-opacity-10 btn gradient-button intent text-dark btn-sm rounded-2 py-1 px-3"
                              onclick="selectedButton(this)">Educational</button>
                           <button id="btn2"
                              type="button"
                              class="intentClass bg-warning bg-opacity-10 btn gradient-button intent  text-dark btn-sm rounded-2 py-1 px-3"
                              onclick="selectedButton(this)">Humorous</button>

                        </div>
                     </div>
                     <div class="pb-3">
                        <p class="pb-2 fw-bold m-0">Target Title</p>
                        <div class="d-flex flex-wrap gap-3">
                           <input type="text"
                              class="rounded-2 bg-transparent px-2 py-0"
                              name="custom"
                              id="custom" placeholder="Add Custom Option">
                           <button type="button"
                              class="targetClass bg-warning bg-opacity-10  btn gradient-button btn-active text-dark btn-sm rounded-2 py-1 px-3 btn-select"
                              onclick="selectButton(this)">CEO</button>
                           <button type="button"
                              class="targetClass bg-warning bg-opacity-10  btn gradient-button text-dark btn-sm rounded-2 py-1 px-3 btn-select"
                              onclick="selectButton(this)">CIO</button>
                           <button type="button"
                              class="targetClass bg-warning bg-opacity-10  btn gradient-button text-dark btn-sm rounded-2 py-1 px-3 btn-select"
                              onclick="selectButton(this)">CTO</button>
                           <button type="button"
                              class="targetClass bg-warning bg-opacity-10  btn gradient-button text-dark btn-sm rounded-2 py-1 px-3 btn-select"
                              onclick="selectButton(this)">COO</button>
                           <button type="button"
                              class="targetClass bg-warning bg-opacity-10  btn gradient-button text-dark btn-sm rounded-2 py-1 px-3 btn-select"
                              onclick="selectButton(this)">CISO</button>
                           <button type="button"
                              class="targetClass bg-warning bg-opacity-10  btn gradient-button text-dark btn-sm rounded-2 py-1 px-3 btn-select"
                              onclick="selectButton(this)">CFO</button>
                           <button type="button"
                              class="targetClass bg-warning bg-opacity-10  btn gradient-button text-dark btn-sm rounded-2 py-1 px-3 btn-select"
                              onclick="selectButton(this)">VP</button>
                           <button type="button"
                              class="targetClass bg-warning bg-opacity-10  btn gradient-button text-dark btn-sm rounded-2 py-1 px-3 btn-select"
                              onclick="selectButton(this)">Director</button>
                           <button type="button"
                              class="targetClass bg-warning bg-opacity-10  btn gradient-button text-dark btn-sm rounded-2 py-1 px-3 btn-select"
                              onclick="selectButton(this)">Third-Party IT Group.</button>
                        </div>
                     </div>
                     <div class="pb-3">
                        <p class="pb-2 fw-bold m-0">Next Level Insights</p>
                        <!--classes added 22/7 -->
                        <div
                           class="d-flex justify-content-center row flex-wrap gap-3">
                           <!--btn Name Change 22/7 -->
                           <button type="button" id="IDFinancial"
                              class="IdButtonFInancialInsights bg-warning bg-opacity-10 col-5  btn gradient-button text-dark btn-sm rounded-2 py-1 px-3 btn-select">Financial Insights</button>
                           <button type="button" id="IDGrants"
                              class=" bg-warning bg-opacity-10 col-5 btn gradient-button text-dark btn-sm rounded-2 py-1 px-3 btn-select">Grants</button>
                        </div>
                     </div>
                     <div class="mt-auto d-flex justify-content-center">
                        <button id="genEmail" class="btn-sm btn gradient-button" disabled>
                           Generate
                           Email</button>
                     </div>
                  </div>

               </div>
               <div
                  class="col-4 h-100 w-33 focus-area position-relative px-3 shadow rounded flex-column">
                  <div
                     class="position-absolute d-flex align-items-center justify-content-start mt-5">
                     <img
                        id="showgiftab3" style="display: none;"
                        class="w-100 h-100"
                        src="{% static 'assets/images/dotline-unscreen.gif' %}"
                        class="img-fluid" alt="Your GIF">
                  </div>
                  <!-- <div
                     class="col-12 w-100  bg-dark bg-opacity-10  "> -->
                  <div
                     class="bg-warning shadow-s fixed-top position-absolute start-0 end-0  bg-opacity-10 ">
                     <div
                        class="d-flex  gap-3 justify-content-end py-2 px-3  border-top">
                        <div
                           class="social-icon  gradient-button p-1 rounded-2 border-0">
                           <img class="w-100 p-1 h-100"
                              src="{% static 'assets/images/gmail.png' %}" alt>
                        </div>
                        <div
                           class="social-icon  gradient-button p-1 rounded-2 border-0">
                           <img class="w-100 p-1 h-100"
                              src="{% static 'assets/images/outlook.png' %}" alt>
                        </div>
                        {% comment %} <div
                           class="social-icon  gradient-button  rounded-2 border-0">
                           <img class="w-100 p-1 h-100"
                              src="{% static 'assets/images/linkedin.png' %}" alt>
                        </div> {% endcomment %}

                     </div>
                  </div>
                  <!-- </div> -->
                  <div class="pb-2 mt-5 pt-4  card1">
                     <div class="col-12 pt-2 " id="IdCardsPlace">


                        
                        {% comment %} <div class="form-check w-100 position-relative">
                           <input
                              class="form-check-input position-absolute bottom-0 end-0 mb-2 me-2"
                              type="radio"
                              name="radioOptions" id="optionA" value="A" checked>
                           <label class="form-check-label  w-100"
                              for="optionA">
                              <div
                                 class="btn  w-100 p-0 m-0 option-label">
                                 <div
                                    class="col-12 bg-light overflow-hidden rounded-4 p-3 shadow">
                                    <div
                                       class="d-flex align-items-start justify-content-between">
                                       <div
                                          class="d-flex gap-2 align-items-center pb-2">
                                          <div
                                             class="user-avatar overflow-hidden  rounded-circle">
                                             <img class="h-100 w-100"
                                                src="{% static 'assets/images/imagePreviewEmail.png' %}" 
                                                alt="User Avatar">
                                          </div>
                                          <div>
                                             <p class="p-0 text-dark m-0">Target
                                                Title</p>
                                             <span
                                                class="text-muted fs-12 p-0 m-0">
                                                Just Now •
                                                <span>
                                                   <svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" fill="currentColor"
                                                      class="bi bi-globe-europe-africa"
                                                      viewBox="0 0 16 16">
                                                      <path
                                                         d="M8 0a8 8 0 1 0 0 16A8 8 0 0 0 8 0ZM3.668 2.501l-.288.646a.847.847 0 0 0 1.479.815l.245-.368a.809.809 0 0 1 1.034-.275.809.809 0 0 0 .724 0l.261-.13a1 1 0 0 1 .775-.05l.984.34c.078.028.16.044.243.054.784.093.855.377.694.801-.155.41-.616.617-1.035.487l-.01-.003C8.274 4.663 7.748 4.5 6 4.5 4.8 4.5 3.5 5.62 3.5 7c0 1.96.826 2.166 1.696 2.382.46.115.935.233 1.304.618.449.467.393 1.181.339 1.877C6.755 12.96 6.674 14 8.5 14c1.75 0 3-3.5 3-4.5 0-.262.208-.468.444-.7.396-.392.87-.86.556-1.8-.097-.291-.396-.568-.641-.756-.174-.133-.207-.396-.052-.551a.333.333 0 0 1 .42-.042l1.085.724c.11.072.255.058.348-.035.15-.15.415-.083.489.117.16.43.445 1.05.849 1.357L15 8A7 7 0 1 1 3.668 2.501Z" />
                                                   </svg>
                                                </span></span>
                                          </div>
                                       </div>
                                       <div
                                          class="px-2 pb-2 pt-0 border-0 rounded-2 bg-opacity-25 btn gradient-button bg-success ">
                                          <i class="bi bi-text-paragraph"></i>
                                       </div>
                                    </div>
                                    <div class="pt-2 ">

                                       <div class="col-12 ms-auto pe-1 pb-2">
                                          <textarea
                                             class="form-control p-0 m-0 no-border bg-transparent"
                                             id="textArea"
                                             rows="1"
                                             oninput="autoResize(this)"
                                             placeholder="Post Content"></textarea>
                                          <div
                                             class="d-flex gap-3 justify-content-start">
                                             <button id="saveBtn"
                                                class="btn py-0 btn-primary gradient-button mt-2"
                                                style="display: none;">Save</button>
                                             <button id="cancelBtn"
                                                class="btn gradient-button btn-secondary bg-opacity-25 py-0 mt-2"
                                                style="display: none;">Cancel</button>
                                          </div>

                                       </div>

                                    </div>
                                 </div>
                              </div>
                           </label>
                        </div>
                        <div class="form-check w-100 position-relative">
                           <input
                              class="form-check-input position-absolute bottom-0 end-0 mb-2 me-2"
                              type="radio"
                              name="radioOptions" id="optionB" value="B" checked>
                           <label class="form-check-label w-100" for="optionB">
                              <div
                                 class="btn  w-100 p-0 m-0 option-label">
                                 <div
                                    class="col-12 bg-light overflow-hidden rounded-4 p-3 shadow">
                                    <div
                                       class="d-flex align-items-start justify-content-between">
                                       <div
                                          class="d-flex gap-2 align-items-center pb-2">
                                          <div
                                             class="user-avatar overflow-hidden  rounded-circle">
                                             <img class="h-100 w-100"
                                                src="{% static 'assets/images/imagePreviewEmail.png' %}" 
                                                alt="User Avatar">
                                          </div>
                                          <div>
                                             <p class="p-0 text-dark m-0">Target
                                                Title</p>
                                             <span
                                                class="text-muted fs-12 p-0 m-0">
                                                Just Now •
                                                <span>
                                                   <svg
                                                      xmlns="http://www.w3.org/2000/svg"
                                                      width="12" height="12"
                                             fill="currentColor"
                                                      class="bi bi-globe-europe-africa"
                                                      viewBox="0 0 16 16">
                                                      <path
                                                         d="M8 0a8 8 0 1 0 0 16A8 8 0 0 0 8 0ZM3.668 2.501l-.288.646a.847.847 0 0 0 1.479.815l.245-.368a.809.809 0 0 1 1.034-.275.809.809 0 0 0 .724 0l.261-.13a1 1 0 0 1 .775-.05l.984.34c.078.028.16.044.243.054.784.093.855.377.694.801-.155.41-.616.617-1.035.487l-.01-.003C8.274 4.663 7.748 4.5 6 4.5 4.8 4.5 3.5 5.62 3.5 7c0 1.96.826 2.166 1.696 2.382.46.115.935.233 1.304.618.449.467.393 1.181.339 1.877C6.755 12.96 6.674 14 8.5 14c1.75 0 3-3.5 3-4.5 0-.262.208-.468.444-.7.396-.392.87-.86.556-1.8-.097-.291-.396-.568-.641-.756-.174-.133-.207-.396-.052-.551a.333.333 0 0 1 .42-.042l1.085.724c.11.072.255.058.348-.035.15-.15.415-.083.489.117.16.43.445 1.05.849 1.357L15 8A7 7 0 1 1 3.668 2.501Z" />
                                                   </svg>
                                                </span></span>
                                          </div>
                                       </div>
                                       <div
                                          class="px-2 pb-2 pt-0 border-0 rounded-2 bg-opacity-25 btn gradient-button bg-success ">
                                          <i class="bi bi-text-paragraph"></i>
                                       </div>
                                    </div>
                                    <div class="pt-2 ">

                                       <div class="col-12 ms-auto pe-1 pb-2">
                                          <textarea
                                             class="form-control p-0 m-0 no-border bg-transparent"
                                             id="textAreaB"
                                             rows="1"
                                             oninput="autoResize(this)"
                                             placeholder="Post Content"></textarea>
                                          <div
                                             class="d-flex gap-3 justify-content-start">
                                             <button id="saveBtnB"
                                                class="btn py-0 btn-primary gradient-button mt-2"
                                                style="display: none;">Save</button>
                                             <button id="cancelBtnB"
                                                class="btn gradient-button btn-secondary bg-opacity-25 py-0 mt-2"
                                                style="display: none;">Cancel</button>
                                          </div>
                                       </div>

                                    </div>
                                 </div>
                              </div>
                           </label>
                        </div> {% endcomment %}

                     </div>
                  </div>
               </div>
            </div>
         </div>








         <div class="row justify-content-between py-4 dashbpard-content" id="IdFinanicalInsight" style="display:none;">
            <div class="d-flex gap-2 h-100">
               <div class="col-4 w-33 shadow h-100 rounded">
                  <div
                     class="col-12 w-100 position-relative h-100 d-flex flex-column p-3">
                     <div class="d-flex justify-content-between w-100">
                        <small class="p-0 fw-semibold m-0">SR Company</small>
                        <small class="p-0 text-end fw-semibold m-0">Prospect
                           Compnay</small>
                     </div>
                     <div
                        class="d-flex border-bottom mb-2 pb-2 justify-content-between">
                        <div class="d-flex gap-2  align-items-center pb-2">
                           {% comment %} <div
                              class="user-avatar overflow-hidden border border-2 border-danger rounded-circle">
                              <img class="h-100 w-100"
                                 src="{% static 'assets/images/imagePreviewEmail.png' %}" 
                                 alt="User Avatar">
                           </div> {% endcomment %}
                           <div class="text-start">
                              <small class="p-0  m-0">{{user.company}}</small>
                           </div>
                        </div>
                        <div class="handshake-Icon">
                           <img class="w-100 h-100" 
                              src="{% static 'assets/images/handShake.png' %}" 
                              alt="hand shake">
                        </div>

                        <div class="d-flex gap-2  align-items-center pb-2">
                           <div class="text-end">
                              <small class="p-0 m-0" id="IdProspectName">Name</small>
                           </div>
                           <div
                              class="user-avatar overflow-hidden border border-2 border-danger rounded-circle">
                              <img class="h-100 w-100" id="IdImageProspect"
                                 src="{% static 'assets/images/imagePreviewEmail.png' %}"  
                                 alt="User Avatar">
                           </div>
                        </div>

                     </div>
                     <div class="form-group pb-2 col-12">
                        <label for="pcompany">Financial Raw Data</label>
                     </div>
                     <!-- Changes 23/7 -->
                     <div
                        class="shadow-sm position-relative msg-area rounded bg-white border-dark  pe-2 ">
                        <div class="col-12 ">
                           <textarea id="input-text"
                              placeholder="Input Financial Raw Data Here"
                              rows="20"
                              class="w-100 msg-area form-control no-border"
                              oninput="updateWordCount()"></textarea>

                        </div>

                        <div id="showContent"
                           class="position-absolute top-0 end-0 start-0 mt-3"
                           style="display: none;">
                           <img class="w-100 h-100"
                              src="{% static 'assets/images/dotline-unscreen.gif' %}" 
                              class="img-fluid" alt="Your GIF">
                        </div>
                     </div>
                     <div id="word-count" class="text-end pt-2 mt-1">0/1000</div>

                     <!-- Changes 23/7 -->
                     <div
                        class="d-flex mt-auto justify-content-end gap-2  pt-3">
                        <button id="processBtn2"
                           class="btn-sm btn gradient-button px-5">Process</button>
                     </div>
                     <!-- Changes 23/7 -->
                  </div>
               </div>
               <div class="col-4 w-33 h-100 shadow rounded">
                  <div class="col-12 overflow-auto h-100 mx-auto focus-area shadow rounded p-3 ">
                     <div
                        class="form-group position-relative pb-2 pb-lg-4 col-12">
                        <label for="focus-area" class="fw-bold">Focus Areas</label>
                        <!-- Changes 23/7 -->
                        <textarea class="form-control" id="focus-area2"
                           rows="8"
                           placeholder="Input areas you want to highlight in the email"
                           maxlength="500"></textarea>
                        <!-- Changes 23/7 -->

                        <div id="char-count" class="text-end text-danger">0/500</div>
                     </div>

                     <div class="mt-auto d-flex justify-content-center">
                        <button id="genEmail2" disabled
                           class=" btn px-5 fs-6 gradient-button">
                           Submit</button>
                     </div>
                  </div>

               </div>
               <div class="col-4 w-33 shadow h-100 rounded">
                  <div
                     class="col-12 w-100 position-relative h-100 d-flex flex-column p-3">
                     <!-- Changes 23/7 -->
                     <h5 class="p-0 text-center m-0 py-3">Financial Insights</h5>
                     <div
                        class="shadow-sm position-relative msg-area rounded bg-white border-dark  py-3">
                        <div class="col-12 pb-2 px-3">
                           <div class="d-flex align-items-center gap-3">
                              <div
                                 class="user-avatar pb-3 overflow-hidden border border-2 border-danger rounded-circle">
                                 <img class="h-100 w-100" id="imageFinancial"
                                    src="{% static 'assets/images/imagePreviewEmail.png' %}"
                                    alt="User Avatar">
                              </div>
                              <h5 id="headingFinancial" class="clickable  pb-0 mb-0">UC
                                 Health</h5>
                           </div>
                           <small id="financialOutput" class="clickable mb-3"></small>

                        </div>
                        <div id="showContent"
                           class="position-absolute top-0 end-0 start-0 mt-3"
                           style="display: none;">
                           <img class="w-100 h-100"
                              src="{% static 'assets/images/dotline-unscreen.gif'  %}"
                              class="img-fluid" alt="Your GIF">
                        </div>
                     </div>
                     <div
                        class="d-flex mt-auto justify-content-end pt-3">
                        <button id="IdbtnEmbed" disabled class="btn-sm btn gradient-button">Embed</button>
                     </div>
                  </div>
               </div>
            </div>
         </div>










         </main>

         <div class="modal fade"
            id="myModal" tabindex="-1" role="dialog"
            tabindex="-1"
            aria-labelledby="exampleModalLabel" aria-hidden="true">
            <div class="modal-dialog modal-dialog-centered">
               <div class="modal-content">
                  <div class="modal-header d-flex gap-2">
                     <div
                        class="user-avatar overflow-hidden border border-2 border-danger rounded-circle">
                        <img class="h-100 w-100"
                           src="{% static 'assets/images/imagePreviewEmail.png' %}"
                           alt="User Avatar">
                     </div>

                     <h1 class="modal-title fs-4 gradient-heading"
                        id="exampleModalLabel">What do you
                        want to do today?</h1>
                     <button type="button" class="btn-close"
                        data-bs-dismiss="modal" aria-label="Close"></button>
                  </div>
                  <div class="modal-body">
                     <div>
                        <p>
                           “You only have to be right once.” — Drew Houston,
                           founder
                           of Dropbox
                        </p>
                        <p>
                           “I’m not afraid to take a swing and miss.” — Fred
                           Smith,
                           founder of FedEx Corporation
                        </p>
                        <p>
                           “When there is no struggle, there is no strength.” —
                           Oprah
                           Winfrey, media executive
                        </p>

                     </div>
                  </div>
                  <!-- 
               <div class="modal-footer">
                  <button type="button" class="btn gradient-button"
                     data-bs-dismiss="modal">Close</button>
               </div> -->
               </div>
            </div>
         </div>

         <script
            src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js"
            integrity="sha384-oBqDVmMz9ATKxIep9tiCxS/Z9fNfEXiDAYTujMAeBAsjFuCZSmKbSSUnQlmh/jp3"
            crossorigin="anonymous">
      </script>
         <script
            src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.min.js"
            integrity="sha384-cuYeSxntonz0PPNlHhBs68uyIAVpIIOZZ5JqeqvYYIcEL727kskC66kF92t6Xl2V"
            crossorigin="anonymous">
      </script>

         <script
            src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js">
      </script>
      
      <script>
         



         function selectButton(button) {
            var buttons = document.getElementsByClassName('btn-selected');
            for (var i = 0; i < buttons.length; i++) {
               buttons[i].classList.remove('btn-active');
            }
            button.classList.add('btn-active');
         }
      
         function selectedButton(button) {
            var buttons = document.getElementsByClassName('intent');
            for (var i = 0; i < buttons.length; i++) {
               buttons[i].classList.remove('btn-active');
            }
            button.classList.add('btn-active');
         }
         $(".IdButtonFInancialInsights").click(function () {
               $('#IdFinanicalInsight').show();
               $('#IdEmail').hide();
               
               $('#IdButtonFInancialInsight').addClass('btn-active');
               $('#IdButtonEmail').removeClass('btn-active');
               
           });

         
         $("#IdbtnEmbed").click(function () {
            $('#IDFinancial').addClass('btn-active');

            $('#IdFinanicalInsight').hide();
            $('#IdEmail').show();

            $('#IdButtonFInancialInsight').removeClass('btn-active');
            $('#IdButtonEmail').addClass('btn-active');
            
            
            
        });

           
           
      </script>



         <script>
            
          //  $("#processBtn").click(function () {
             //  $('#submitBtnId').prop('disabled',false);
//            });

            $("#submitBtnId").click(function () {
               $('#genEmail').prop('disabled',false);
            });

           function autoResize(textarea) {
            textarea.style.height = 'auto';
            textarea.style.height = textarea.scrollHeight + 'px';
            }
         $(document).ready(function() {
            $('#myModal').modal('show1');
         });

          $(document).ready(function () {
            
            $("#processBtn").on("click", function () {

               var linkedInCompany = $('#pcompany').val()
               if (linkedInCompany != '')
                  {
                     var url = "{% url 'linkedinCompanyData'  %}";
                     $.ajax({
                        type:'POST',
                        dataType:'JSON',
                        url :  url,
                        data : {
                           linkedInCompany: linkedInCompany,
                           csrfmiddlewaretoken: '{{ csrf_token }}'
                        },
                        beforeSend: function () {
                            $("#showContent").fadeIn();

                       },
                        success : function(response){
                    $("#showContent").fadeOut();

                        if (response.success == true){
                           $('#submitBtnId').prop('disabled',false);

                           $("#outputId1").hide();
                           $("#outputId2").show();
                           
                           $("#CompanyImage").prop("src", response.results.Prospect_Company_logo);
                           $("#headingcompany").text(response.results.Prospect_Company_name);
                           $("#paragraph").text(response.results.Prospect_Company_Overview);

                           $("#paragraph2").text(response.results.Prospect_Company_Industry);
                           $("#paragraphSpecialitites").text(response.results.Prospect_Company_specialties);
                           $("#paragraph5").text(response.results.Prospect_Company_HQ);
                           $("#paragraph6").text(response.results.Prospect_Company_founded);
                           $("#paragraph3").text(response.results.Prospect_Company_Size);


                           $("#id_Prospect_Company_name").val(response.results.Prospect_Company_name);
                           $("#id_Prospect_Company_Overview").val(response.results.Prospect_Company_Overview);
                           $("#id_Prospect_Company_Industry").val(response.results.Prospect_Company_Industry);
                           $("#id_Prospect_Company_Headquarters").val(response.results.Prospect_Company_HQ);
                           $("#id_Prospect_Company_Size").val(response.results.Prospect_Company_Size);
                           $("#id_Prospect_Company_founded").val(response.results.Prospect_Company_founded);
                           $("#id_Prospect_Company_specialties").val(response.results.Prospect_Company_specialties);



                           $("#IdImageProspect").prop("src", response.results.Prospect_Company_logo);
                           $("#IdProspectName").text(response.results.Prospect_Company_name);
                           $("#headingFinancial").text(response.results.Prospect_Company_name);
                           $("#imageFinancial").prop("src", response.results.Prospect_Company_logo);

                           
                           
                        }
                        else{
                           $("#overview").val(response.results);

                        }
                           
                           
                        },
                        error : function(response){
                    $("#showContent").fadeOut();

                             }
                     })
                  }
               else{
                  alert('Please enter link of company');
               }

            });
          });
          
          $(document).ready(function () {
            var buttons = document.getElementsByClassName('targetClass');

            $("#genEmail").on("click", function () {
              var focus_input = $("#focus-area").val();
               if(focus_input !=''){
                  var Prospect_Company_name =   $("#id_Prospect_Company_name").val();
                  var Prospect_Company_Overview =   $("#id_Prospect_Company_Overview").val();
                  var Prospect_Company_Industry =   $("#id_Prospect_Company_Industry").val();
                  var Prospect_Company_Headquarters =   $("#id_Prospect_Company_Headquarters").val();
                  var Prospect_Company_Size =   $("#id_Prospect_Company_Size").val();
                  var Prospect_Company_founded =   $("#id_Prospect_Company_founded").val();
                  var Prospect_Company_specialties =   $("#id_Prospect_Company_specialties").val();
                  var intentVal = $('.intent.btn-active').text()
                  let targetArray = []
                  for (var i = 0; i < buttons.length; i++) {
                     if(buttons[i].classList.contains('btn-active')){
                        targetArray.push(buttons[i].innerText);
                     }
                  
                  }
                  var url = "{% url 'GenerateEmail'  %}";
                  $.ajax({
                     type:'POST',
                     dataType:'JSON',
                     url :  url,
                     data : {
                        focus_area: focus_input,
                        Prospect_Company_name: Prospect_Company_name,
                        Prospect_Company_Overview: Prospect_Company_Overview,
                        Prospect_Company_Industry: Prospect_Company_Industry,
                        Prospect_Company_Headquarters: Prospect_Company_Headquarters,
                        Prospect_Company_Size: Prospect_Company_Size,
                        Prospect_Company_founded: Prospect_Company_founded,
                        Prospect_Company_specialties: Prospect_Company_specialties,
                        Intent: intentVal,
                        Prospect_Title_list: targetArray,
                        csrfmiddlewaretoken: '{{ csrf_token }}'
                     },
                     beforeSend: function () {
                        $("#showgiftab3").fadeIn();
                      //  $("#showgif").fadeIn();

                      $("#showgif").fadeIn();

                    },
                     success : function(response){

                           if (response.success == true){
                              $("#showgif").fadeOut();
                              $("#showgiftab3").fadeOut();

                              for (var key in response.results) {
                                 var html_data ='';
                                 html_data += '<div class="form-check w-100 position-relative"> <input class="form-check-input position-absolute bottom-0 end-0 mb-2 me-2" type="radio" name="radioOptions" id="optionA" value="A" checked>'
                                 html_data += '<label class="form-check-label w-100" for="optionA"> <div class="btn w-100 p-0 m-0 option-label"> <div class="col-12 bg-light overflow-hidden rounded-4 p-3 shadow">'    
                                 html_data += '<div class="d-flex align-items-start justify-content-between"> <div class="d-flex gap-2 align-items-center pb-2"> <div class="user-avatar overflow-hidden rounded-circle"> '
                                 html_data += '<img class="h-100 w-100" src="{% static 'assets/images/imagePreviewEmail.png' %}" alt="User Avatar"> '   
                                 html_data += '</div> <div> <p class="p-0 text-dark m-0">'+ response.results[key].title +'</p>'
                                 html_data += '<span class="text-muted fs-12 p-0 m-0">'+ 'Just Now •'
                                 html_data += '<span> <svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" fill="currentColor" class="bi bi-globe-europe-africa" viewBox="0 0 16 16">'
                                 html_data += '<path d="M8 0a8 8 0 1 0 0 16A8 8 0 0 0 8 0ZM3.668 2.501l-.288.646a.847.847 0 0 0 1.479.815l.245-.368a.809.809 0 0 1 1.034-.275.809.809 0 0 0 .724 0l.261-.13a1 1 0 0 1 .775-.05l.984.34c.078.028.16.044.243.054.784.093.855.377.694.801-.155.41-.616.617-1.035.487l-.01-.003C8.274 4.663 7.748 4.5 6 4.5 4.8 4.5 3.5 5.62 3.5 7c0 1.96.826 2.166 1.696 2.382.46.115.935.233 1.304.618.449.467.393 1.181.339 1.877C6.755 12.96 6.674 14 8.5 14c1.75 0 3-3.5 3-4.5 0-.262.208-.468.444-.7.396-.392.87-.86.556-1.8-.097-.291-.396-.568-.641-.756-.174-.133-.207-.396-.052-.551a.333.333 0 0 1 .42-.042l1.085.724c.11.072.255.058.348-.035.15-.15.415-.083.489.117.16.43.445 1.05.849 1.357L15 8A7 7 0 1 1 3.668 2.501Z" /> </svg>'
                                 html_data += '</span></span> </div> </div> <div class="px-2 pb-2 pt-0 border-0 rounded-2 bg-opacity-25 btn gradient-button bg-success "> '
                                 html_data += '<i class="bi bi-text-paragraph"></i> </div> </div> <div class="pt-2 "> <div class="col-12 ms-auto pe-1 pb-2">'
                                 html_data += '<textarea class="form-control p-0 m-0 no-border bg-transparent" id="textArea" rows="1" oninput="autoResize(this)">'+response.results[key].Subject+'"\n"'+ response.results[key].Body+'</textarea> '
                                 html_data += '<div class="d-flex gap-3 justify-content-start"> <button id="saveBtn" class="btn py-0 btn-primary gradient-button mt-2" style="display: none;">Save</button>'
                                 html_data += '<button id="cancelBtn" class="btn gradient-button btn-secondary bg-opacity-25 py-0 mt-2" style="display: none;">Cancel</button>'
                                 html_data += '</div> </div> </div> </div> </div> </label> </div>'             
                                 $("#IdCardsPlace").append(html_data);
                               }

                           }
                           else{
                              $("#showgif").fadeOut();
                              $("#showgiftab3").fadeOut();
                              $("#overview").val(response.results);
                           }
                        
                     },
                     error : function(response){
                            $("#showgiftab3").fadeOut();
                     }
                  })
               }
               else{
                  alert("Please write something in Focus Area Field");
               }
            });
          });
              $(document).ready(function () {
            var textarea = $("#textArea");
            var saveBtn = $("#saveBtn");
            var cancelBtn = $("#cancelBtn");
            var originalText = textarea.val();
            var updatedText = "";
            var isFocused = false;

            textarea.on("input", function () {
                updatedText = textarea.val();
            });

            textarea.on("focus", function () {
                isFocused = true;
                textarea.val(updatedText);
                textarea.css("white-space", "normal");
                saveBtn.show();
                cancelBtn.show();
            });

            textarea.on("blur", function () {
                isFocused = false;
                var trimmedText = updatedText.substring(0, 50);
                if (updatedText.length > 50) {
                    trimmedText += "...";
                }
                textarea.val(trimmedText);
                saveBtn.hide();
                cancelBtn.hide();
            });

            saveBtn.on("click", function () {
                originalText = updatedText;
                textarea.trigger("blur");
            });

            cancelBtn.on("click", function () {
                textarea.val(originalText.substring(0, 50));
                if (originalText.length > 50) {
                    textarea.val(textarea.val() + "...");
                }
                textarea.trigger("blur");
            });

            // Initialize the textarea with ellipsis
            textarea.trigger("blur");
        });
         $(document).ready(function () {
            var textarea = $("#textAreaB");
            var saveBtn = $("#saveBtnB");
            var cancelBtn = $("#cancelBtnB");
            var originalText = textarea.val();
            var updatedText = "";
            var isFocused = false;

            textarea.on("input", function () {
                updatedText = textarea.val();
            });

            textarea.on("focus", function () {
                isFocused = true;
                textarea.val(updatedText);
                textarea.css("white-space", "normal");
                saveBtn.show();
                cancelBtn.show();
            });

            textarea.on("blur", function () {
                isFocused = false;
                var trimmedText = updatedText.substring(0, 50);
                if (updatedText.length > 50) {
                    trimmedText += "...";
                }
                textarea.val(trimmedText);
                saveBtn.hide();
                cancelBtn.hide();
            });

            saveBtn.on("click", function () {
                originalText = updatedText;
                textarea.trigger("blur");
            });

            cancelBtn.on("click", function () {
                textarea.val(originalText.substring(0, 50));
                if (originalText.length > 50) {
                    textarea.val(textarea.val() + "...");
                }
                textarea.trigger("blur");
            });

            // Initialize the textarea with ellipsis
            textarea.trigger("blur");
        });

 $(document).ready(function () {
            // Function to update the border color of the selected option
            function updateSelectedOption() {
                $(".form-check-label").each(function () {
                    if ($(this).find(".form-check-input").prop("checked")) {
                        $(this).find(".option-label").addClass("selected-option");
                    } else {
                        $(this).find(".option-label").removeClass("selected-option");
                    }
                });
            }

            // Call the function on page load and whenever a radio button is clicked
            updateSelectedOption();
            $(".form-check-input").on("click", updateSelectedOption);
        });
     </script>











{% comment %} // grant js {% endcomment %}
<script>
   

   function makeEditable(element) {
     element.contentEditable = 'true';
     element.focus();
   }

   function saveContent(element) {
     element.contentEditable = 'false';
   }

   document.addEventListener('click', function (event) {
     const clickableElements = document.querySelectorAll('.clickable');

     for (const element of clickableElements) {
       if (event.target === element) {
         makeEditable(element);
       } else {
         saveContent(element);
       }
     }
   });
          function autoResize(textarea) {
           textarea.style.height = 'auto';
           textarea.style.height = textarea.scrollHeight + 'px';
           }
           
           


         $(document).ready(function () {
           $("#processBtn2").on("click", function () {
               var input_text = $("#input-text").val();

               if(input_text !=''){

               $('#genEmail2').prop('disabled',false);
                  
               }


               
           });
        });
        
        
        $(document).ready(function () {
           var textarea = $("#textArea");
           var saveBtn = $("#saveBtn");
           var cancelBtn = $("#cancelBtn");
           var originalText = textarea.val();
           var updatedText = "";
           var isFocused = false;

           textarea.on("input", function () {
               updatedText = textarea.val();
           });

           textarea.on("focus", function () {
               isFocused = true;
               textarea.val(updatedText);
               textarea.css("white-space", "normal");
               saveBtn.show();
               cancelBtn.show();
           });

           textarea.on("blur", function () {
               isFocused = false;
               var trimmedText = updatedText.substring(0, 50);
               if (updatedText.length > 50) {
                   trimmedText += "...";
               }
               textarea.val(trimmedText);
               saveBtn.hide();
               cancelBtn.hide();
           });

           saveBtn.on("click", function () {
               originalText = updatedText;
               textarea.trigger("blur");
           });

           cancelBtn.on("click", function () {
               textarea.val(originalText.substring(0, 50));
               if (originalText.length > 50) {
                   textarea.val(textarea.val() + "...");
               }
               textarea.trigger("blur");
           });

           // Initialize the textarea with ellipsis
           textarea.trigger("blur");
       });
        $(document).ready(function () {
           var textarea = $("#textAreaB");
           var saveBtn = $("#saveBtnB");
           var cancelBtn = $("#cancelBtnB");
           var originalText = textarea.val();
           var updatedText = "";
           var isFocused = false;

           textarea.on("input", function () {
               updatedText = textarea.val();
           });

           textarea.on("focus", function () {
               isFocused = true;
               textarea.val(updatedText);
               textarea.css("white-space", "normal");
               saveBtn.show();
               cancelBtn.show();
           });

           textarea.on("blur", function () {
               isFocused = false;
               var trimmedText = updatedText.substring(0, 50);
               if (updatedText.length > 50) {
                   trimmedText += "...";
               }
               textarea.val(trimmedText);
               saveBtn.hide();
               cancelBtn.hide();
           });

           saveBtn.on("click", function () {
               originalText = updatedText;
               textarea.trigger("blur");
           });

           cancelBtn.on("click", function () {
               textarea.val(originalText.substring(0, 50));
               if (originalText.length > 50) {
                   textarea.val(textarea.val() + "...");
               }
               textarea.trigger("blur");
           });

           // Initialize the textarea with ellipsis
           textarea.trigger("blur");
       });

$(document).ready(function () {
           // Function to update the border color of the selected option
           function updateSelectedOption() {
               $(".form-check-label").each(function () {
                   if ($(this).find(".form-check-input").prop("checked")) {
                       $(this).find(".option-label").addClass("selected-option");
                   } else {
                       $(this).find(".option-label").removeClass("selected-option");
                   }
               });
           }

           // Call the function on page load and whenever a radio button is clicked
           updateSelectedOption();
           $(".form-check-input").on("click", updateSelectedOption);
       });
     

     //   /////////////////////
     const focusArea = document.getElementById('focus-area2');
   const charCount = document.getElementById('char-count');

   focusArea.addEventListener('input', function () {
     const currentLength = this.value.length;
     const maxLength = parseInt(this.getAttribute('maxlength'));

     charCount.innerText = `${currentLength}/${maxLength}`;

     if (currentLength >= maxLength) {
       charCount.classList.add('text-danger');
     } else {
       charCount.classList.remove('text-danger');
     }
   });

   // If the user navigates back to the page, update the character count
   window.addEventListener('pageshow', function () {
     const currentLength = focusArea.value.length;
     const maxLength = parseInt(focusArea.getAttribute('maxlength'));

     charCount.innerText = `${currentLength}/${maxLength}`;

     if (currentLength >= maxLength) {
       charCount.classList.add('text-danger');
     } else {
       charCount.classList.remove('text-danger');
     }
   });


function updateWordCount() {
 const textarea = document.getElementById("input-text");
 const wordCount = textarea.value.trim().split(/\s+/).length;
 const wordCountElement = document.getElementById("word-count");

 if (wordCount > 1000) {
   textarea.value = textarea.value.trim().split(/\s+/).slice(0, 1000).join(" ");
 }

 wordCountElement.textContent = `${wordCount}/1000`;
}  

$(document).ready(function () {
   $("#genEmail2").on("click", function () {
       setTimeout(function () {
           $("#showgiftab3").fadeOut();
       }, 2000); 
   });
 });



 $(document).ready(function () {
   $("#genEmail2").on("click", function () {
            var focus_area2 = $("#focus-area2").val();
            if(focus_area2 !='')
            {
               var Prospect_Company_name =   $("#id_Prospect_Company_name").val();   
               var Prospect_Company_Overview =   $("#id_Prospect_Company_Overview").val();
               var Prospect_Company_Industry =   $("#id_Prospect_Company_Industry").val();
               var Prospect_Company_Headquarters =   $("#id_Prospect_Company_Headquarters").val();
               var Prospect_Company_Size =   $("#id_Prospect_Company_Size").val();
               var Prospect_Company_founded =   $("#id_Prospect_Company_founded").val();
               var Prospect_Company_specialties =   $("#id_Prospect_Company_specialties").val();
               var financial_raw_data = $("#input-text").val();

               var url = "{% url 'GenerateFinancialReport'  %}";

               $.ajax({
                  type:'POST',
                  dataType:'JSON',
                  url :  url,
                  data : {
                     focus_area: focus_area2,
                     Prospect_Company_name: Prospect_Company_name,
                     Prospect_Company_Overview: Prospect_Company_Overview,
                     Prospect_Company_Industry: Prospect_Company_Industry,
                     Prospect_Company_Headquarters: Prospect_Company_Headquarters,
                     Prospect_Company_Size: Prospect_Company_Size,
                     Prospect_Company_founded: Prospect_Company_founded,
                     Prospect_Company_specialties: Prospect_Company_specialties,
                     financial_raw_data: financial_raw_data,
                     csrfmiddlewaretoken: '{{ csrf_token }}'
                  },
                  beforeSend: function () {
                     $("#showgif").fadeIn();
                     $("#showgiftab3").fadeIn();
    
                  },
                  success : function(response){
                     
                     $("#IdbtnEmbed").prop('disabled', false);

                     if (response.success == true){
                        $("#showgif").fadeOut();
                        $("#showgiftab3").fadeOut();
                        $("#financialOutput").text(response.insights);

                        
 
                     }
                     else{
                        $("#showgiftab3").fadeOut();
                        $("#showgif").fadeOut();
//                        $("#overview").val(response.results);
                     }
                  
               },

                  error : function(response){
                     $("#showgiftab3").fadeOut();
                  }
                  
               });

            }
            else{
               alert("Please write something in Focus Area Field");

            }
       setTimeout(function () {
           $("#showgif").fadeOut();
       }, 2000); 
   });
});



 
    </script>




















         <script src="{% static 'assets/js/index.js' %}"></script>

      </body>
   </html>